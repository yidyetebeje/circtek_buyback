<app-generic-modal
  [isOpen]="isOpen"
  title="Battery drain test options"
  [actions]="modalActions"
  (close)="close()"
  (actionClick)="onModalAction($event)"
>
  <form [formGroup]="optionsForm" class="space-y-4">
    <!-- Duration -->
    <div>
      <label for="duration" class="block text-sm font-medium mb-2">Duration <span class="text-red-500">*</span></label>
      <input type="text"
             id="duration"
             class="w-full px-3 py-2 input"
             formControlName="duration"
             placeholder="hh:mm:ss"
             pattern="([0-9]{1,2}:)?([0-9]{1,2}:)?[0-9]{1,2}"
             [class.input-error]="f['duration'].touched && f['duration'].invalid">
      @if (f['duration'].touched && f['duration'].invalid) {
        <div class="text-error text-sm mt-1">
          @if (f['duration'].errors?.['required']) {
            <div>Duration is required.</div>
          }
        </div>
      }
    </div>

    <!-- Threshold -->
    <div>
      <label for="threshold" class="block text-sm font-medium mb-2">Fail threshold <span class="text-red-500">*</span></label>
      <input type="text"
             id="threshold"
             class="w-full px-3 py-2 input"
             formControlName="threshold"
             placeholder="i.e. 5%"
             pattern="[0-9]+%?"
             [class.input-error]="f['threshold'].touched && f['threshold'].invalid">
      @if (f['threshold'].touched && f['threshold'].invalid) {
        <div class="text-error text-sm mt-1">
          @if (f['threshold'].errors?.['required']) {
            <div>Fail threshold is required.</div>
          }
        </div>
      }
    </div>
  </form>
</app-generic-modal>
