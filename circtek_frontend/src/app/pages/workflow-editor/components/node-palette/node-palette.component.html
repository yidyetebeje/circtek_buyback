<div class="card bg-base-100 shadow border border-base-300 overflow-hidden">
  <div class="card-body p-4">
    <h5 class="card-title text-lg font-semibold text-base-content m-0">Workflow Nodes</h5>

    <!-- Work Category -->
    <div class="mt-3 border-t border-base-300">
      <button type="button" class="w-full flex items-center justify-between py-3 hover:bg-base-200 transition-colors" (click)="toggleCategory('work')">
        <span class="text-sm font-medium text-base-content">Work</span>
        <lucide-icon [name]="categoryState['work'] ? 'chevron-down' : 'chevron-right'" class="w-4 h-4 text-base-content/70"></lucide-icon>
      </button>
      <div class="px-1 pb-3" [class.hidden]="!categoryState['work']">
        <div *ngFor="let nodeType of workNodes"
             class="mb-2 cursor-pointer transition-transform duration-150 hover:scale-[1.02]"
             draggable="true"
             (click)="onNodeSelected(nodeType)"
             (dragstart)="onDragStart($event, nodeType)">
          <div class="px-3 py-2 rounded-md text-white text-xs font-medium shadow-sm flex items-center gap-2" [style.background-color]="nodeType.color">
            <span class="truncate">{{ nodeType.label }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Labels Category -->
    <div class="border-t border-base-300">
      <button type="button" class="w-full flex items-center justify-between py-3 hover:bg-base-200 transition-colors" (click)="toggleCategory('labels')">
        <span class="text-sm font-medium text-base-content">Labels</span>
        <lucide-icon [name]="categoryState['labels'] ? 'chevron-down' : 'chevron-right'" class="w-4 h-4 text-base-content/70"></lucide-icon>
      </button>
      <div class="px-1 pb-3" [class.hidden]="!categoryState['labels']">
        <div *ngFor="let nodeType of labelNodes"
             class="mb-2 cursor-pointer transition-transform duration-150 hover:scale-[1.02]"
             draggable="true"
             (click)="onNodeSelected(nodeType)"
             (dragstart)="onDragStart($event, nodeType)">
          <div class="px-3 py-2 rounded-md text-white text-xs font-medium shadow-sm flex items-center gap-2" [style.background-color]="nodeType.color">
            <span class="truncate">{{ nodeType.label }}</span>
          </div>
        </div>
        <div *ngIf="labelNodes.length === 0" class="text-sm text-base-content/60 italic text-center py-4">
          No labels available for the current client
        </div>
      </div>
    </div>
  </div>
</div>
